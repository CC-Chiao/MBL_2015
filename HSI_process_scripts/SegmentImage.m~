function SegmentImage(Filename, Refname)
% uses GUI to make three masks: non-artifacts (get rid of hands, bins,
% glare, etc), animal-only, bg-only
% saves them to current directory
% also opens reference image
% ex: SegmentImage('12345678.png', '12345678_Global_Ref.jpg')

imgname = Filename;
refimg = imread(Refname);
figure
imshow(refimg);
readimg = imread(['SegImg_', Filename, '_Global_Ref.png']);
roiwindow = CROIEditor(readimg);
disp('Create animal mask');
pause

% ROI GUI will pop up; make animal mask (polygon around only organisms)
% click apply when done, DO NOT QUIT GUI WINDOW, then return to command
% window and hit any key

[animalroi, labels, number] = getROIData(roiwindow);

% animalmask = sprintf('%s%s%s', 'AnimalMask_', imgname, '.tiff');
save(['AnimalMask_', imgname, '.mat'], 'animalroi');
delete(roiwindow);
bgwindow = CROIEditor(readimg);
disp('Create background mask');
pause

[bgroi, bglabels, bgnumber] = getROIData(bgwindow);
bgname = sprintf('%s%s%s', 'BackgroundMask_', imgname, '.tiff');
save(['BGMask_', imgname, '.mat'], 'bgroi');
delete(bgwindow);
close all;
end